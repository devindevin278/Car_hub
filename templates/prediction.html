<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap">
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <!-- NAVBAR -->
    <header>
        <a href="/">
            <img src="../static/Asset/carhub.png" alt="" id="navbar_logo">
        </a>
        <a href="/" class="nav_text" id="nav_home">Home</a>
        <a href="/data" class="nav_text">Data</a>
        <a href="/prediction" class="nav_text" id="nav_pred">Predict</a>
    </header>

    <div class="d_banner">
        <img src="../static/Asset/predict_banner.png" alt="" width="100%" class="data_img">
        <div class="circle"></div>
        <div class="data_text">CAR PRICE PREDICTION</div>
    </div>

    <form>
        <div class="pred_text">
            <h1>Predict Your Car Price</h1>
            <p>Please fill out all categories before you submit it!</p>
        </div>

        <!-- Baris 1 -->
        <div class="row">

            <!-- manufacturer -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="manufacturer" id="manufacturer" aria-label="Floating label select example">
                      <option selected class="select">Select Manufacturer</option>

                      {% for manufacturer in manufacturers %}

                      <option value="{{ manufacturer }}" class="select">{{ manufacturer }}</option>
                      
                      {% endfor %}

                    </select>
                    <label for="manufacturer" class="select">Manufacturer</label>
                </div>
            </div>

            <!-- model -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="car_model" id="car_model" aria-label="Floating label select example">
                        <option selected class="select">Select Car Model</option>
                     
                    </select>
                    <label for="car_model" class="select">Car Model</label>
                </div>
            </div>

            <!-- year -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="prod_year" id="production" aria-label="Floating label select example">
                      <option selected class="select">Select Production Year</option>
                      
                      {% for prod_year in prod_years %}

                      <option value="{{ prod_year }}" class="select">{{ prod_year }}</option>
                      
                      {% endfor %}
                     
                    </select>
                    <label for="production" class="select">Production</label>
                </div>
            </div>
        </div>
        
        <!-- Baris 2 -->
        <div class="row" id="row2">

            <!-- Category -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="category" id="category" aria-label="Floating label select example">
                      <option selected class="select">Select Category</option>
                      
                      {% for category in categorys %}

                      <option value="{{ category }}" class="select">{{ category }}</option>
                      
                      {% endfor %}
                     
                    </select>
                    <label for="category" class="select">Category</label>
                </div>
            </div>

            <!-- Fuel type -->
            <div class="col">
              <div class="form-floating">
                    <select class="form-select" name="fuel_type" id="fuel_type" aria-label="Floating label select example">
                      <option selected class="select">Select The Year</option>
                      {% for fuel_type in fuel_types %}

                      <option value="{{ fuel_type }}" class="select">{{ fuel_type }}</option>
                      
                      {% endfor %}
                      
                    </select>
                    <label for="fuel_type" class="select">Fuel_type</label>
                </div>
            </div>
                
            <!-- Cylinder -->
            <div class="col">
              <div class="form-floating">
                <select class="form-select" name="cylinder" id="cylinder" aria-label="Floating label select example">
                  <option selected class="select">Select cylinder</option>
                  
                  {% for cylinder in cylinders %}
    
                  <option value="{{ cylinder }}" class="select">{{ cylinder }}</option>
                  
                  {% endfor %}
                  
                </select>
                <label for="cylinder" class="select">Cylinder</label>
              </div>
            </div>
                
        </div>

        <!-- Baris 3 -->
        <div class="row justify-content-md-center" id="row3">
          
          <!-- gear_box_type -->         
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="gear_box_type" id="gear_box_type" aria-label="Floating label select example">
                      <option selected class="select">Select gear</option>
                     
                      {% for gear_box_type in gear_box_types %}
        
                      <option value="{{ gear_box_type }}" class="select">{{ gear_box_type }}</option>
                      
                      {% endfor %}
                     
                    </select>
                    <label for="gear_box_type" class="select">Gear box type</label>
                </div>
            </div>
          <!-- drive wheel -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="drive_wheel" id="drive_wheel" aria-label="Floating label select example">
                      <option selected class="select">Select drive wheel</option>
                     
                      {% for drive_wheel in drive_wheels %}
        
                      <option value="{{ drive_wheel }}" class="select">{{ drive_wheel }}</option>
                      
                      {% endfor %}
                     
                    </select>
                    <label for="color" class="select">Drive wheels</label>
                </div>
            </div>

            <!-- door -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="door" id="door" aria-label="Floating label select example">
                      <option selected class="select">Select door</option>
                     
                     <!-- {% for door in doors %}
        
                      <option value="{{ door }}" class="select">{{ door }}</option>
                      
                      {% endfor %}--> 
                      <option class="select" value="4">4</option>
                      <option class="select" value="2">2</option>
                      <option class="select" value="5">5</option>
                     
                    </select>
                    <label for="door" class="select">Doors</label>
                </div>
            </div>

        </div>

        <!-- Baris 4 -->
        <div class="row justify-content-md-center" id="row4">
          
          <!-- wheel -->         
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="wheel" id="wheel" aria-label="Floating label select example">
                      <option selected class="select">Select wheel</option>
                     
                      {% for wheel in wheels %}
        
                      <option value="{{ wheel }}" class="select">{{ wheel }}</option>
                      
                      {% endfor %}
                     
                    </select>
                    <label for="wheel" class="select">Wheel</label>
                </div>
            </div>

          <!-- color -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="color" id="color" aria-label="Floating label select example">
                      <option selected class="select">Select Color</option>
                     
                      {% for color in colors %}
        
                      <option value="{{ color }}" class="select">{{ color }}</option>
                      
                      {% endfor %}
                     
                    </select>
                    <label for="color" class="select">Color</label>
                </div>
            </div>

            <!-- airbag -->
            <div class="col">
                <div class="form-floating">
                    <select class="form-select" name="airbag" id="airbag" aria-label="Floating label select example">
                      <option selected class="select">Select airbag</option>
                     
                      {% for airbag in airbags %}
        
                      <option value="{{ airbag }}" class="select">{{ airbag }}</option>
                      
                      {% endfor %}
                     
                    </select>
                    <label for="airbag" class="select">airbags</label>
                </div>
            </div>

        </div>


        <!-- levy -->
        <label for="levy">Levy</label>
        <input id="levy" name="levy" type="number">
        
        <!-- mileage -->
        <label for="mileage">mileage</label>
        <input id="mileage" name="mileage" type="number">

        <!-- engine_volume -->
        <label for="engine_volume">engine_volume</label>
        <input id="engine_volume" name="engine_volume" type="number">


        <p>Leather interior: </p>
        <input type="radio" id="li_yes" name="leather_interior" value="True">
        <label for="li_yes">Yes</label>
        <input type="radio" id="li_no" name="leather_interior" value="False">
        <label for="li_no">No</label>

        <p>Engine volume turbo: </p>
        <input type="radio" id="turbo_yes" name="turbo" value="True">
        <label for="turbo_yes">Yes</label>
        <input type="radio" id="turbo_no" name="turbo" value="False">
        <label for="turbo_no">No</label>


        <div class="button_pred">
            <button type="button" class="btn btn-warning dark" id="button1" onclick="send_data()">Predict Car Price</button>
        </div>

        
    </form>

    <div class="row">
      <div class="col-12" style="text-align: center;">
        <h3><span id="prediction"></span></h3>
      </div>  
    </div>

    <!-- Footer -->
    <div class="footerr">
        <div class="footer-c">
            <img src="../static/Asset/carhub.png" alt="">
            <p>Copyright ©2023 .carhub. All rights reserved.</p>
        </div>
    </div>

    
  <script>
    //console.log("test")
    let manufacturer = document.getElementById('manufacturer');
    let car_model = document.getElementById('car_model');
    let option;

    manufacturer.onchange = function () {
      let manufacturer_value = manufacturer.value
      console.log(manufacturer_value);

      // buat hilangin list sebelumnya
      car_model.length = 0;
      
      // buat dropdown car model
      {% for manufacturer in manufacturers %} 
        if (manufacturer_value == "{{ manufacturer }}") {
          {% for model in models %}
            {% if manufacturer in model %}
              option = document.createElement('option');
              option.setAttribute('value', "{{ model }}")
              option.innerHTML = "{{ model }}"
              car_model.appendChild(option)
            
            {% endif %}
          {% endfor %}
        }

      {% endfor %}
    }

    function form_handler(event) {
      event.preventDefault();
    }

    function send_data() {
      // 
      document.querySelector('form').addEventListener('submit', form_handler);

      var fd = new FormData(document.querySelector('form'));

      var xhr = new XMLHttpRequest();

      xhr.open('POST', '/predict', true);
      document.getElementById('prediction').innerHTML = 'Wait! Predicting Price...';

      xhr.onreadystatechange = function() {
        if(xhr.readyState == XMLHttpRequest.DONE) {
          document.getElementById('prediction').innerHTML = 'Prediction: ' + xhr.responseText;
        }
      }
      
      xhr.onload = function(){};
      xhr.send(fd);


    }

  </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="../static/js/style.js"></script>
</body>
</html>